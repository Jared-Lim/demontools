<!doctype html>
 
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>SMT4 Test Page</title>
  <link rel="stylesheet" href="jquery-ui-1.10.3/themes/base/jquery-ui.css" />
  <script src="jquery-ui-1.10.3/jquery-1.9.1.js"></script>
  <script src="jquery-ui-1.10.3/ui/jquery-ui.js"></script>
  <script src="database/master.js"></script>
  <script src="database/skills/master.js"></script>
  <script src="database/skills/mahanma.js"></script>
  <script src="database/demons/master.js"></script>
  <script src="database/demons/demons.js"></script>

  <script>
  function handleAffinity(affinity) {
    if(affinity == "null")
      return "<a style=\"color: #999999;\">N</a>";
    else if(affinity == "weak")
      return "<a style=\"color: #CC0000;\">W</a>";
    else if(affinity == "protect")
      return "<a style=\"color: #00CC00;\">P</a>";
    else if(affinity == "reflect")
      return "<a style=\"color: #0000CC;\">R</a>";
    else if(affinity == "absorb")
      return "<a style=\"color: #CC00CC;\">A</a>";
    else
      return "-";
  }
  $(document).ready(function(){

    $("#autocomplete").autocomplete({
      source: demonNamesEN,
      select: function(e, ui) {
        showDemon(ui.item.value);
      }
    });
    $("#autocomplete").keyup(function(e){
      showDemon($("#autocomplete").val());
    })
    var demonList = "<table border=\"1\">";
    demonList += "<th>Level</th>";
    demonList += "<th>Tribe</th>";
    demonList += "<th>Name</th>";
    demonList += "<th>HP</th>";
    demonList += "<th>MP</th>";
    demonList += "<th>Str</th>";
    demonList += "<th>Skill</th>";
    demonList += "<th>Magic</th>";
    demonList += "<th>Speed</th>";
    demonList += "<th>Luck</th>";
    demonList += "<th>Phys</th>";
    demonList += "<th>Gun</th>";
    demonList += "<th>Fire</th>";
    demonList += "<th>Ice</th>";
    demonList += "<th>Elec</th>";
    demonList += "<th>Shock</th>";
    demonList += "<th>Banish</th>";
    demonList += "<th>Curse</th>";
    demonList += "<th>Skills</th>";

    $.each(demonByNameEN, function(nameEN, data){
      demonList += "<tr>";
      demonList += "<td>" + data.level + "</td>\n";
      demonList += "<td>" + tribeListEN[tribeListJP.indexOf(
        data.tribe)] + "</td>\n";
      demonList += "<td>" + data.nameEN + "</td>\n";
      demonList += "<td>" + data.stats.hp + "</td>\n";
      demonList += "<td>" + data.stats.mp + "</td>\n";
      demonList += "<td>" + data.stats.strength + "</td>\n";
      demonList += "<td>" + data.stats.skill + "</td>\n";
      demonList += "<td>" + data.stats.magic + "</td>\n";
      demonList += "<td>" + data.stats.speed + "</td>\n";
      demonList += "<td>" + data.stats.luck + "</td>\n";
      demonList += "<td>" + handleAffinity(data.affinity.physical) + "</td>";
      demonList += "<td>" + handleAffinity(data.affinity.gun) + "</td>";
      demonList += "<td>" + handleAffinity(data.affinity.fire) + "</td>";
      demonList += "<td>" + handleAffinity(data.affinity.ice) + "</td>";
      demonList += "<td>" + handleAffinity(data.affinity.thunder) + "</td>";
      demonList += "<td>" + handleAffinity(data.affinity.shock) + "</td>";
      demonList += "<td>" + handleAffinity(data.affinity.banish) + "</td>";
      demonList += "<td>" + handleAffinity(data.affinity.curse) + "</td>";

      var skills = [ ];
      $.each(data.skills, function(name, level){
        if(level > 0)
          skills.push(name + " (" + level + ")");
        else
          skills.push(name);
      });

      demonList += "<td>" + skills.join(" / ") + "</td>";
      demonList += "</tr>";
    });
    demonList += "</table>";
    $("#demonList").html(demonList);

    $("#demonCount").text(demonNamesEN.length);

  });
  </script>
</head>
<body style="background-color: black; color: white;">

<p>There are <a id="demonCount"></a> demons in the database.</p>

<label for="autocomplete">Select a demon:</label>
<input id="autocomplete">

<div id="demonData">
  <label>Name:</label><div id="demonData_name"></div>
  <label>Tribe:</label><div id="demonData_tribe"></div>
  <label>Level:</label><div id="demonData_level"></div>
</div>
<hr/>
<div id="demonList"></div>

<p>You can help improve the project by visiting the developer page at: <a href="https://github.com/erikku/smt4tool">https://github.com/erikku/smt4tool</a></p>

</body>
</html>
